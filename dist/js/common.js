"use strict";var oName_state,psw_state,psw_state2,email_state,yzm_state,cookie={set:function(n,s,t){var a=n+"="+s;t.expires&&(a+=";expires="+t.expires.toUTCString()),t.path&&(a+=";path="+t.path),t.domain&&(a+=";domain="+t.domain),document.cookie=a},get:function(n){for(var s=document.cookie.split("; "),t=0;t<s.length;t++){var a=s[t].split("=");if(n==a[0])return a[1]}},remove:function(n){var s=new Date;s.setDate(s.getDate()-1),cookie.set(n,"",{expires:s,path:"/"})}};function tT(s,n){window.onscroll=function(){400<=window.scrollY?(s.style.display="block",n.style.display="block"):window.scrollY<400&&(s.style.display="none",n.style.display="none")};s.onclick=function(n){(n=n||window.event).stopPropagation?n.stopPropagation():n.cancelBubble=!0,s.timer=setInterval(function(){window.scrollY<=0&&clearInterval(toTop.timer),window.scrollBy(0,-50)},30)},document.onclick=function(){clearInterval(s.timer)}}function cover(){for(var n=document.getElementsByClassName("cover_c"),s=0;s<n.length;s++)n[s].onmouseover=function(n){n=n||window.event;$(this).find(".cover_b").stop().animate({opacity:.4}),$(this).find(".cover_pri").find(".joinCar").stop().show()},n[s].onmouseout=function(n){n=n||window.event;$(this).find(".cover_b").stop().animate({opacity:0}),$(this).find(".cover_pri").find(".joinCar").stop().hide()}}function createCode(){for(var n=[],s=0;s<4;s++)n.push("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[parseInt(61*Math.random())]);return n.join("")}function showlist(){$(".down>li").on("mouseenter",function(){$(this).children("div").css({display:"block"},30),$(this).css({backgroundColor:"#fff"})}),$(".down>li").on("mouseleave",function(){$(this).children("div").css({display:"none"}),$(this).css({backgroundColor:"#F7F7F7"})})}function updateCartStyle(){var s=cookie.get("username");$.ajax({url:"../api/2.username.php",data:{username:s}}).done(function(n){1==n?($("header .container>span").html('嗡,欢迎来到乐蜂,&nbsp;<a href="javascript:;" class="">'+s+'</a>&nbsp;|&nbsp;<a class="exitBtn" href="javascript:;">退出登录</a>&nbsp;'),$.ajax({url:"../api/6.shoppingCart.php"}).done(function(n){var s=JSON.parse(n);if(s){var t=0,a=0,i="";s.map(function(n){t+=1*n.qty,a+=n.qty*n.curPri.slice(1),i+='\n                            <dl data-id="'+n.id+'">\n                                <dt>\n                                    <a href="detail.html?id='+n.id+'" target="_blank">\n                                        <img src="'+n.imgurl+'">\n                                    </a>\n                                </dt>\n                                <dd class="shopping-pro">\n                                    <a  href="detail.html?id='+n.id+'" target="_blank">'+n.title+'</a>\n                                </dd>\n                                <dd class="shopping-price"><em>'+n.curPri+"</em>×"+n.qty+"</dd>\n                            </dl>\n                        "}),$(".noshop").css("display","none"),$(".haveshop").css("display","block"),$(".buycar_qty").html(s.length),$(".shopping-list-title").find("strong").html(s.length),$("#totalProduct").html(t),$("#totalMoney").html("<em>￥</em>"+a),$("#shopping_list_info").html(i)}else $(".noshop").css("display","block"),$(".haveshop").css("display","none")})):$("header .container>span").html('欢迎来到乐蜂,请&nbsp;<a href="./login.html" class="logBtn">登录</a>&nbsp;|&nbsp;<a class="regBtn" href="./register.html">免费注册</a>&nbsp;')})}function jump(){$(".mianmo").click(function(){var n=$(".mianmo").html();n=n.match(/[\u4e00-\u9fa5]{2,}/g).join(""),$(".mianmo")[0].href="html/goodslist.html?keyword="+n})}function oNa(n){oName_state=/[^\w\u4e00-\u9fa5]/g.test(n)?($(".username").html("含有非法字符").css("color","red"),!1):""==n?($(".username").html("不能为空").css("color","red"),!1):25<n.length?($(".username").html("不能超出25个字符").css("color","red"),!1):n.length<6?($(".username").html("不能少于6个字符").css("color","red"),!1):($(".username").html("该用户名可以注册").css("color","red"),!0),checkform()}function pSw(n){psw_state=""==n?($(".psw1").html("密码不能为空").css("color","red"),!1):n.length<8||20<n.legth?($(".psw1").html("长度应为8-20个字符").css("color","red"),!1):/[^\d]/g.test(n)?/[^a-zA-Z]/g.test(n)?($(".psw1").html("该密码模式可以使用").css("color","red"),!0):($(".psw1").html("不能全部为字母").css("color","red"),!1):($(".psw1").html("不能全部为数字").css("color","red"),!1),checkform()}function ema(){email_state=/^[\w_\-\.]+@[\w]+\.([\w]{2,4})$/g.test(val)?(email_msg.innerHTML="<i class='fa fa-check-square'>OK!</i>",!0):!(email_msg.innerHTML="<i class='fa fa-close'>请输入正确的邮箱格式</i>"),checkform()}function checkform(n){oName_state&&psw_state&&psw_state2&&n&&n()}function getCookie(){var s=cookie.get("username");$.ajax({url:"../api/2.username.php",data:{username:s}}).done(function(n){1==n?($("header .container>span").html('嗡,欢迎来到乐蜂,&nbsp;<a href="javascript:;" class="">'+s+'</a>&nbsp;|&nbsp;<a class="exitBtn" href="javascript:;">退出登录</a>&nbsp;'),$.ajax({url:"../api/6.shoppingCart.php",data:{type:"all"}}).done(function(n){var s=JSON.parse(n),t=0,a=0;if(s){$("#shopping_cart_contain .container").html('\n                        <div class="cart-t">\n                            <i></i>请在<b id="countDown"></b> 内提交订单，下单后您另有30分钟的支付时间。\n                            <span id="testDJS"></span>\n                        </div>\n                        <div class="cart-x">\n                           <div class="tit" id="cart_list_head">\n                               <table>\n                                   <tbody>\n                                   <tr>\n                                       <th class="td01">商品信息</th>\n                                       <th class="td02">单价</th>\n                                       <th class="td03">数量</th>\n                                       <th class="td04">小计</th>\n                                       <th class="td05">操作</th>\n                                   </tr>\n                                    </tbody>\n                                </table>\n                           </div>\n                           <div id="cart_list_temp">\n                                <div class="list">\n                                    <div class="table-box-tip">\n                                        <div class="list-orders" id="0_0">\n                                        </div>\n                                    </div>\n                                    <table>\n                                        <tbody>\n                                        </tbody>\n                                    </table>\n                                    </div>\n                                </div>\n                           \x3c!-- 中间商品数据由js拼接出来 --\x3e\n                           <div class="orders" id="shopping_cart_active"><p><span class="u-m">运费</span>本单已免运费</p></div>\n                        </div>\n                        <div class="cart-j">\n                            <div class="sykj"><a href="javascript:void(0);" id="couponUpDown">使用卡券<i class="down" id="upDownLi"></i> </a>\n                                已成功使用<b>0</b>张卡券 <input type="button" style="display:none;" value="取消使用" id="cancelUse"></div>\n                            <div class="cart-m" style="display:none;" id="couponUpDownDiv">\n                                <div class="cart-m-t">\n                                    <label>激活新卡劵:</label>\n                                    <span>优惠券（含代金券）</span>\n                                    <input id="couponSn" name="couponSn" type="text" class="num" value="请输入激活码">\n                                    <input id="couponSnBtn" name="couponSnBtn" type="button" class="but" value="激活">\n                                    <div class="cart-m-t-error" style="display:none;">您输入的激活码有误</div>\n                                </div>\n                                <img src="//h5rsc.vipstatic.com/lefeng_pc/images/page/cart-min3.png" style="visibility: hidden;position:absolute; top:0;left:0">\n                                <div class="cart-m-b">\n                                    <div class="tit">\n                                        <ul id="page_nav">\n                                            <li class="cur">全场券(<b>0</b>)</li>\n                                            <li>专场券(<b>0</b>)</li>\n                                        </ul>\n                                        <p>"专场券"和"全场券"不能同时使用。</p>\n                                    </div>\n                                    <div class="main">\n                                        <p>注：多个专场可使用多张，同一个专场只可使用1张。</p>\n                                        \x3c!--专场卷--\x3e\n                                        <div id="cycle">\n                                            <table id="book7_1" width="100%"><tbody><tr style=""><td colspan="5"><i></i>您还没有满足使用条件的卡券~</td></tr></tbody></table>\n                                            \x3c!--全场卷--\x3e\n                                            <table style="display:none" width="100%" id="book7_2"><tbody><tr style=""><td colspan="5"><i></i>您还没有满足使用条件的卡券~</td></tr></tbody></table>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                            </div>\n                            \n                            <div class="cart-b">\n                                <ul id="amount_cart"><li><label class="fl">共<b>1</b>件商品  商品金额</label><span class="fr"> <span class="u-yen">¥</span><strong class="all-list u-price">399</strong> </span></li></ul>\n                            </div>\n                            <div class="cart-b cart-bt">\n                                <ul id="totalPayPrice"><li class="ov-pre"><label class="fl">总金额</label><span class="fr"><span class="u-yen">¥</span><strong class="all-list u-price">399</strong> </span></li></ul>\n                            </div>\n                            <div class="cart-js">\n                                <div class="fl"><a href="http://www.lefeng.com" mars_sead="lpc_xf_buy">继续购物</a><a href="#" mars_sead="lpc_xf_buy"></a></div>\n                                <div class="fr">\n                                    <span id="cleanCart" style="display:none;"> \n                                        结算时间已过，购物车被清空了~重新\n                                        <input name="" type="button" value="挑选商品" class="txsp">\n                                    </span> \n                                    <input name="" type="button" value="立即结算" class="pre" id="settlement" mars_sead="lpc_xf_cart">\n                                </div>\n                            </div>\n                        </div>\n                    ');var i="";i+=s.map(function(n){return t+=1*n.qty,a+=n.qty*n.curPri.slice(1),'\n                                <tr data-id="'+n.id+'"  cart_id="53067878">\n                                    <td class="td01">\n                                        <div class="pic">\n                                            <a href="./detail.html?id='+n.id+'" target="_blank">\n                                                <img width="58" height="74" alt="" src="'+n.imgurl+'">\n                                            </a>\n                                            <div class="max-pic" style="display:none;">\n                                                <div class="max-pic-l">\n                                                    <span class="arrow-out">◆</span>\n                                                    <span class="arrow">◆</span>\n                                                </div>\n                                                <div class="max-pic-t">\n                                                    <img src="'+n.imgurl+'" alt="" width="184" height="234">\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class="fr">\n                                            <div class="name"><a title="" href="./detail.html?id='+n.id+'" target="_blank">'+n.title+'</a>\n                                            </div>\n                                            <div class="size">规格:均码</div>\n                                        </div>\n                                    </td>\n                                    <td class="td02"><span class="m-price"><span class="u-yen">¥</span><strong class="u-price">'+n.curPri.slice(1)+'</strong></span><del class="mar-price"><span class="u-yen">¥</span><span class="u-price">'+n.oldPri.slice(1)+'</span></del>\n                                    </td>\n                                    <td class="td03">\n                                        <div class="quantity"><span class="l-no">-</span><a href="javascript:;" class="l-y" action="minus">-</a>\n                                            <input size_id="534320981049673" buy_num_min="1" buy_num_max="30" name="" value="'+n.qty+'" type="text" class="tip"><span class="r-no">+</span><a href="javascript:;" action="add" class="r-y">+</a>\n                                            <div class="cart-error"></div>\n                                        </div>\n                                    </td>\n                                    <td class="td04 "><span class="m-price"><span class="u-yen">¥</span><strong class="u-price list-item">'+n.allPri+'</strong></span></td><td class="td05"><a href="javascript:;" class="del" value="534320981049673">删除</a>\n                                        <div class="cart-error"></div>\n                                    </td>\n                                </tr>'}).join(""),$("#cart_list_temp tbody").html(i),$(".cart-b ul li .u-price").html(a),$(".cart-b ul li b").html(t),dis=parseInt(1800),disd(),Downtimer=setInterval(disd,1e3)}else $("#shopping_cart_contain .container").html('\n                        <div class="cart4-no" style="display:block">\n                            <div class="fl"></div>\n                            <div class="fr">\n                                <h1>您的购物车里没有商品，请先去挑选心爱的商品吧！</h1>\n                                <div class="lia">您可以<a href="../inde.html">返回首页</a>挑选喜欢的商品，或者\n                                </div>\n                                <div class="lib">\n                                    <input name="" id="cart-search-submit" type="button" class="button">\n                                    <input name="" autocomplete="off" id="search-cart" type="text" class="text">\n                                    <div id="cartAuto" class="cart-auto" style="display: none;"></div>\n                                </div>\n                            </div>\n                        </div>')})):($("header .container>span").html('欢迎来到乐蜂,请&nbsp;<a href="./login.html" class="logBtn">登录</a>&nbsp;|&nbsp;<a class="regBtn" href="./register.html">免费注册</a>&nbsp;'),$("#shopping_cart_contain .container").html('\n                        <div class="cart4-no" style="display:block">\n                            <div class="fl"></div>\n                            <div class="fr">\n                                <h1>您的购物车里没有商品，请先去挑选心爱的商品吧！</h1>\n                                <div class="lia">您可以<a href="../inde.html">返回首页</a>挑选喜欢的商品，或者\n                                </div>\n                                <div class="lib">\n                                    <input name="" id="cart-search-submit" type="button" class="button">\n                                    <input name="" autocomplete="off" id="search-cart" type="text" class="text">\n                                    <div id="cartAuto" class="cart-auto" style="display: none;"></div>\n                                </div>\n                            </div>\n                        </div>'))})}function disd(){dis--;var n=parseInt(dis/60%60),s=parseInt(dis%60);n=10<=n?n:"0"+n,s=10<=s?s:"0"+s,$("#countDown")[0].innerHTML=n+"分"+s+"秒",dis<=0&&($("#overTime").show(),$("#shopping_cart_contain .container").html('\n            <div class="cart4-no" style="display:block">\n                <div class="fl"></div>\n                <div class="fr">\n                    <h1>您的购物车里没有商品，请先去挑选心爱的商品吧！</h1>\n                    <div class="lia">您可以<a href="http://www.lefeng.com">返回首页</a>挑选喜欢的商品，或者\n                    </div>\n                    <div class="lib">\n                        <input name="" id="cart-search-submit" type="button" class="button">\n                        <input name="" autocomplete="off" id="search-cart" type="text" class="text">\n                        <div id="cartAuto" class="cart-auto" style="display: none;"></div>\n                    </div>\n                </div>\n            </div>\n            '),$("#reSelectGoods").on("click",function(){location.href="../inde.html"}),$("#refreshCart").on("click",function(){$("#overTime").hide()}),clearInterval(timer))}$(function(){$(".chead-buycar").on("mouseenter",function(){$(".shopping-list").css("display","block"),updateCartStyle()}),$(".chead-buycar").on("mouseleave",function(){$(".shopping-list").css("display","none"),updateCartStyle()}),getCookie(),$("header").on("click",".exitBtn",function(){cookie.remove("username"),location.reload(!0),getCookie()})});